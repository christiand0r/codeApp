<link rel="import" href="../../bower_components/polymer/polymer.html" />

<link rel="import" href="../../bower_components/iron-form/iron-form.html" />
<link rel="import" href="../../bower_components/paper-input/paper-input.html" />
<link
  rel="import"
  href="../../bower_components/paper-input/paper-textarea.html"
/>
<link
  rel="import"
  href="../../bower_components/paper-button/paper-button.html"
/>

<dom-module id="code-form">
  <template>
    <style>
      :host {
        display: block;
        background-color: #393e4670;
        padding: 1rem;
        --paper-input-container-color: #dfe0e1;
        --paper-input-container-focus-color: #fff;
        --paper-input-container-input-color: #fff;
      }

      .btn-submit {
        background-color: #dfe0e1;
        color: #212529;
        margin: 1rem 0 0 0;
      }

      .creator {
        display: block;
        color: #fff;
        font-family: "Roboto", "Noto", sans-serif;
        margin-top: 1rem;
        text-align: right;
      }
    </style>

    <form is="iron-form" id="form-code">
      <paper-input
        type="text"
        label="Descripción"
        name="code_description"
        class="custom-input"
        on-change="handleChange"
      ></paper-input>

      <paper-textarea
        label="Código"
        name="code"
        rows="5"
        on-change="handleChange"
      ></paper-textarea>

      <paper-input
        type="text"
        label="Lenguaje"
        name="lang"
        on-change="handleChange"
      ></paper-input>

      <paper-button raised type="submit" class="btn-submit" on-tap="addSnippet"
        >Guardar Snippet</paper-button
      >
    </form>
    <small class="creator">Created by Door</small>
  </template>

  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>
  <script>
    hljs.highlightAll();
  </script>
  <script>
    let snippet = {
      code: "",
      code_description: "",
      lang: "",
    };

    Polymer({
      is: "code-form",

      properties: {
        snippets: {
          type: Array,
          notify: true,
          // observer:"_snippetsChanged"
        },
      },
      observers: ["_snippetsChanged(snippets.*)"],

      // @Methods
      addSnippet() {
        // this.snippets = [...this.snippets, snippet];

        //Polymer Mutations methods
        // this.push("objectToMutate", "valueToAdd")
        this.push("snippets", snippet);
      },

      handleChange(e) {
        snippet = {
          ...snippet,
          [e.target.name]: e.target.value,
        };
      },

      // @Observers Methods
      _snippetsChanged() {
        // console.log(this.snippets);
      },
    });
  </script>
</dom-module>
